
<!DOCTYPE html><html><head><title>UI Bangalore</title><link rel="stylesheet" href="../UIBangalore/public/stylesheets/uikit.min.css"><link rel="stylesheet" href="../UIBangalore/public/stylesheets/leaflet.css"><link rel="stylesheet" href="../UIBangalore/public/stylesheets/style.css"></head>
<body>
<nav class="uk-navbar"><a class="uk-navbar-brand">Urban Informatics</a><ul class="uk-navbar-nav"><li class="uk-active"><a>about</a></li><li class="uk-active"><a>partners</a></li><li class="uk-active"><a>contact</a></li></ul><div id="layerSearch" class="uk-navbar-center"><form action="data" method="get" class="uk-form uk-margin-remove uk-display-inline-block"><input type="search" name="name" value=""></form></div></nav>
<script src="../UIBangalore/public/javascripts/jquery-2.1.3.min.js"></script>
<script src="../UIBangalore/public/javascripts/leaflet.js"></script>
<script src="../UIBangalore/public/javascripts/uikit.min.js"></script><script src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script><!--h1= title--><!--p Welcome to #{title}-->
<div id="map" style="height: 400px;"></div><script>var map = L.map("map").setView([12.9667, 77.5667], 13);
var layer = new L.StamenTileLayer("toner-lite");
map.addLayer(layer);

function request(text) {
      $.ajax(
        {
          type: 'GET',
          url: '/data',
          dataType: 'json',
          data: {name: text},
          contentType: 'application/json; charset=utf-8',
          success: function (result) {
            parseResponse(result)
          },
          error: function (req, status, error) {
            alert('Unable to get data');
          }
        });
    }
    
function parseResponse(data) {

  //console.log(data)

  layer1 = new L.GeoJSON();
  layer1.on('data', function(e) {
    e.layer.setStyle({ color:  '#DD8B12', weight: 2, fill: true, fillColor: '#DD8B12' });
  });
  layer1.addData(data);
  map.addLayer(layer1);
  map.fitBounds(layer1.getBounds(), animate=true);

}

$('form').submit(function(event) {
// Stop the browser from submitting the form.
event.preventDefault();

val = $('form input').val()

request(val)

});</script></body></html>